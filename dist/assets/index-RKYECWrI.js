import{D as _,a as f,b as C,c as L,S as w}from"./SearchBar-5eEUiUXa.js";import{C as x,A as v}from"./AtomSpinner-Sdoxd1dX.js";import{_ as N,a as S,r as n,o as u,g as A,w as l,d as P,b as s,c as d,e as m}from"./index-pE5mnqQf.js";import"./IconSearch-5qFAVXBc.js";const T={name:"schedule",components:{DxDataGrid:_,DxColumn:f,DxPaging:C,DxPager:L,ContentPanel:x,SearchBar:w,AtomSpinner:v},props:{},data(){return{searchTerm:"",surgeryHistoryList:[],schedules:[{id:1,patientName:"Ali",surgeryName:"Surgery 1",surgeryDate:"01.01.2021",status:"Active",doctor:"Doctor 1"},{id:2,patientName:"David",surgeryName:"Surgery 2",surgeryDate:"01.01.2021",status:"Active",doctor:"Doctor 2"},{id:3,patientName:"Cristiano",surgeryName:"Surgery 3",surgeryDate:"01.01.2021",status:"Active",doctor:"Doctor 3"},{id:4,patientName:"Lionel",surgeryName:"Surgery 4",surgeryDate:"01.01.2021",status:"Active",doctor:"Doctor 4"}],filteredSchedules:[],isLoading:!0}},computed:{filteredItems(){return this.schedules.filter(t=>t.patientName.toLowerCase().includes(this.searchTerm.toLowerCase())||t.surgeryName.toLowerCase().includes(this.searchTerm.toLowerCase())||t.surgeryDate.toLowerCase().includes(this.searchTerm.toLowerCase())||t.status.toLowerCase().includes(this.searchTerm.toLowerCase())||t.doctor.toLowerCase().includes(this.searchTerm.toLowerCase()))}},methods:{...S(["getAllPreOps","getUser","getPatient"]),convertDateFormat(t){var r=new Date(t),a=r.getUTCDate(),o=r.getUTCMonth()+1,e=r.getUTCFullYear(),c=`${a}.${o}.${e}`;return c},calculateStatus(t){var r=new Date(t),a=new Date;return r>a?"Active":"Completed"},async _getAllPreOps(){let t,r,a,o=[];this.isLoading=!0,this.surgeryHistoryList=await this.getAllPreOps();for(let e=0;e<this.surgeryHistoryList.length;e++)t=await this.getUser({uid:this.surgeryHistoryList[e].doctorId}),r=await this.getPatient({uid:this.surgeryHistoryList[e].patientUId}),a={id:this.surgeryHistoryList[e].id,patientName:r.name+" "+r.surname,surgeryName:this.surgeryHistoryList[e].surgeryType,surgeryDate:this.convertDateFormat(this.surgeryHistoryList[e].surgeryDate),status:this.calculateStatus(this.surgeryHistoryList[e].surgeryDate),doctor:t.name+" "+t.surname},o.push(a);this.schedules=o,this.isLoading=!1}},async mounted(){await this._getAllPreOps()}},B={class:"w-[1090px] flex flex-row items-center justify-between"},H={key:0,class:"flex justify-center items-center h-[500px]"},b={key:1,class:"table-responsive"};function U(t,r,a,o,e,c){const g=n("SearchBar"),h=n("AtomSpinner"),i=n("DxColumn"),y=n("DxDataGrid"),p=n("ContentPanel");return u(),A(p,null,{header:l(()=>[P("div",B,[s(g,{items:e.schedules,placeholder:"Search Schedule","onUpdate:searchTerm":r[0]||(r[0]=D=>e.searchTerm=D),class:"w-full"},null,8,["items"])])]),content:l(()=>[e.isLoading?(u(),d("div",H,[s(h,{color:"#BEEBE5","animation-duration":1e3})])):m("",!0),e.isLoading?m("",!0):(u(),d("div",b,[s(y,{"data-source":c.filteredItems,class:"clickable-row",selection:{mode:"single"}},{default:l(()=>[s(i,{"data-field":"patientName"}),s(i,{"data-field":"surgeryName"}),s(i,{"data-field":"surgeryDate"}),s(i,{"data-field":"status"}),s(i,{"data-field":"doctor"})]),_:1},8,["data-source"])]))]),_:1})}const G=N(T,[["render",U]]);export{G as default};
